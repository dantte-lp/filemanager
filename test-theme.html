<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест темы</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen p-8 transition-colors">
    <h1 class="text-2xl mb-4">Тест переключения темы</h1>
    
    <button onclick="toggleTheme()" 
            class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
        Переключить тему
    </button>
    
    <div class="mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded">
        <p>Текущая тема: <span id="current-theme"></span></p>
        <p>LocalStorage: <span id="storage-theme"></span></p>
        <p>Класс на html: <span id="html-class"></span></p>
    </div>
    
    <div class="mt-4 grid grid-cols-2 gap-4">
        <div class="p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded">
            <h3 class="font-bold mb-2">Тестовые цвета</h3>
            <p class="text-gray-600 dark:text-gray-400">Серый текст</p>
            <p class="text-blue-600 dark:text-blue-400">Синий текст</p>
            <p class="text-green-600 dark:text-green-400">Зеленый текст</p>
        </div>
        <div class="p-4">
            <button class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded">Кнопка</button>
        </div>
    </div>
    
    <script>
        function updateInfo() {
            const isDark = document.documentElement.classList.contains('dark');
            document.getElementById('current-theme').textContent = isDark ? 'Темная' : 'Светлая';
            document.getElementById('storage-theme').textContent = localStorage.getItem('theme') || 'не установлено';
            document.getElementById('html-class').textContent = document.documentElement.className || 'нет классов';
        }
        
        function toggleTheme() {
            const isDark = document.documentElement.classList.contains('dark');
            if (isDark) {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
            updateInfo();
        }
        
        // Инициализация темы
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.documentElement.classList.add('dark');
        } else if (savedTheme === 'light') {
            document.documentElement.classList.remove('dark');
        }
        
        updateInfo();
        
        // Проверка работы Tailwind
        setTimeout(() => {
            const testEl = document.createElement('div');
            testEl.className = 'bg-white dark:bg-gray-900';
            document.body.appendChild(testEl);
            const computed = window.getComputedStyle(testEl);
            const bgColor = computed.backgroundColor;
            document.body.removeChild(testEl);
            
            console.log('Tailwind dark mode test:');
            console.log('Background color:', bgColor);
            console.log('Dark mode working:', bgColor === 'rgb(17, 24, 39)' ? 'YES' : 'NO');
        }, 100);
    </script>
</body>
</html>